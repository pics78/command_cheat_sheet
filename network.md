- ipコマンド

    | 主なオプション | 説明 |
    | ---- | ---- |
    | -s, -stats | より多くの情報を表示 |
    | -r, -resolve | 名前解決して表示 |

    | 主な操作対象 | 説明 |
    | ---- | ---- |
    | link | データリンク層 |
    | addr | IPアドレス |
    | route | ルーティングテーブル |
    | neigh | ARPキャッシュ |

    | 主なコマンド | 説明 |
    | ---- | ---- |
    | show | 情報表示 |
    | add | パラメータ設定 |

    - 例
        - データリンク層の表示: `$ ip link show`
        - enp0s3インターフェースの転送量などの情報表示: `$ ip link show enp0s3`
        - enp0s3インターフェースの状態やIPアドレスの表示: `$ ip addr show enp0s3`
        - enp0s3のIPアドレスを192.168.11.10/24に設定: `$ ip addr add 192.168.11.10/24 dev enp0s3`
        - ルーティングテーブルの表示: `$ ip route show`
        - デフォルトゲートウェイを192.168.11.100に設定: `$ ip route add default via 192.168.11.100`
        - 10.0.0.0/16宛の経路をゲートウェイが192.168.11.254としてルーティングテーブルに追加: `$ ip route add 10.0.0.0/16 via 192.168.11.254`
    - コマンドの省略
        - `$ ip address show`
        - `$ ip sddr show`
        - `$ ip a show`
        - `$ ip a s`
        - `$ ip a`
- ifconfigコマンド

    | パラメータ  | 説明 |
    | ---- | ---- |
    | IPアドレス | IPアドレスを設定 |
    | netmask ネットマスク | ネットマスクを設定 |
    | up | ネットワークインターフェースを活動状態にする |
    | down | ネットワークインターフェースを停止する |

    - 有効になっているネットワークインターフェースの情報表示: `$ ifconfig`  
    (-aオプションを指定すると停止しているものも含めて表示される)
    - 例
        - enp0s3インターフェースにIPアドレスとネットマスクを設定し有効にする
            1. `$ ifconfig enp0s3 192.168.120.27 netmask 255.255.255.0`
            2. `$ ifconfig enp0s3 up`  
            または
            1. `$ ifconfig enp0s3 192.168.120.27 netmask 255.255.255.0 up` (まとめて指定)
- ARP(Address resolution Protocol)
    - IPアドレスからMACアドレスを知る方法
        1. ARPを用いて「自分のMACアドレス」「自分のIPアドレス」「相手のIPアドレス」が含まれたパケットをブロードキャストする
        2. 指定されたIPアドレスを持つ相手がこのパケットを受け取ると自分のMACアドレスを返す
    - 一度取得した情報はARPキャッシュと呼ばれるテーブルに一定期間キャッシュされる
    - arpコマンド
        - ARPキャッシュの表示や操作を行う

        | オプション | 説明 |
        | ---- | ---- |
        | -a (ホスト) | 指定したホストまたはすべてのエントリを表示 |
        | -f ファイル名 | ホスト名とMACアドレスの対応をファイルから読み込む<br>(デフォルトは`/etc/ethers`)|
        | -n | ホスト名をIPアドレスで表示 |
        | -d ホスト | 指定したホストのエントリを削除 |
        | -i インターフェース | ネットワークインターフェースを指定 |
        | -s ホスト MACアドレス | ホストとMACアドレスの対応を書き込む |

- 無線ネットワークの設定
    - 無線LANインターフェースwlp3s0の状態確認: `$ iwconfig wlp3s0`
    - ESSIDに「abcdef」を設定: `$ iwconfig wlp3s0 essid "abcdef"`
    - WEPキーとして「abcd1234」を設定: `$ iwconfig wlp3s0 key s:abcd1234`  
    (WEPは脆弱性が見つかっている)
    - WPA/WPA2の場合
        - 設定ファイルの生成: `$ wpa_passphrase abcdef wlan_no_passphrase > wpa.conf`
        - `$ cp wpa.conf /etc/wpa_supplicant`
        - 無線LANに接続: `$ wpa_supplicant -D wext -i wlp3s0 -c /etc/wpa_supplicant/wpa.conf`  
        -D: ドライバの指定(wext: Linuxの標準無線拡張)  
        -i: 無線LANインターフェースの指定  
        -c: 設定ファイルの指定
        - DHCPクライアントを起動しネットワーク情報を取得: `$ dhclient wlp1s0`
    - 無線インターフェースの名前を調べる: `$ iw dev`
    - 無線インターフェースのリンク状態を確認: `$ iw dev wlp3s0 link`
    - 無線LANインターフェースの情報取得: `$ iwlist 無線インターフェース パラメータ`

    | パラメータ | 説明 |
    | ---- | ---- |
    | scanning [essid ID] | 接続可能なアクセスポイントの一覧と情報を表示する |
    | channel | 設定可能なチャネルを表示 |
    | rate | 伝送速度を表示 |

    - 例
        - 無線インターフェースwlp3s0の接続可能なアクセスポイントとその情報を表示: `$ iwlist wlp3s0 scanning`
- ルーティングの設定
    - routeコマンド
        - ルーティングテーブルの表示: `$ route`  
        (`$ netstat -r`と同じ)

        | オプション | 説明 |
        | ---- | ---- |
        | -n | ホストの名前解決をしない |
        | -F | カーネルのルーティングテーブルを表示 |
        | -C | カーネルのルーティングキャッシュを表示 |

        - ルーティングテーブルの操作
            - 例
                - 192.168.100.0/24のネットワーク宛のパケットをゲートウェイ192.168.1.201へ送るように設定  
                `$ route add -net 192.168.100.0 netmask 255.255.255.0 gw 192.168.1.201`
                - デフォルトゲートウェイを192.168.1.1に設定  
                `$ route add default gw 192.168.1.1`
                - 192.168.100.0/24のネットワーク宛の経路情報を削除  
                `$ route del -net 192.168.100.0 netmask 255.255.255.0 gw 192.168.1.201`
- パケット転送の許可
    - `$ sysctl -w net.ipv4.ip_forward=1`
    - `$ echo 1 > /proc/sys/net/ipv4/ip_forward`
- ネットワーク管理コマンド
    - ping
        - 指定されたホストにICMPパケットを送りその反応を表示する  
        (ICMP: Internet Control Message Protocol)

        | オプション | 説明 |
        | ---- | ---- |
        | -n | ホスト名を名前解決せずにIPアドレスで表示 |
        | -c 回数 | 指定回数だけICMPパケットを送信 |
        | -i 間隔 | 指定間隔ごとにICMPパケットを送信(デフォルトは1秒) |

        - terminalcode.netに対して4回だけICMPパケットを送信: `$ ping -c 4 terminalcode.net`
        - IPv6の場合はping6コマンドを使う: `$ ping6 -c 4 2401:2500:xxxx:xxxx::1`
    - tcpdump
        - 指定したネットワークインターフェースを監視し到達したデータをコンソール上に表示する
        - 不審な挙動をしているプログラムのデータ送信先を解析するといった用途に使える

        | オプション | 説明 |
        | ---- | ---- |
        | -i インターフェース | 監視するインターフェースを指定 |
        | -s バイト数 | パケットから取り出すバイト数を指定 |
        | -X | 16進数とASCII文字で表示 |
        | -n | アドレスを名前解決せずに表示 |
        | -N | ホストのドメイン名を表示しない |
        | -l | 標準出力をバッファリングする |
        | -t | 時刻を表示しない |
        | -v | 詳細に出力 |

        - `port ポート番号`でポート番号を指定できる
    - netstat
        - ネットワーク機能に関する様々な情報を表示
        - アクティブな接続とアクティブなUNIXドメインソケット情報を表示: `$ netstat`  
        ＊アクティブな接続(Active Internet connections)は確立中のネットワーク接続を表す  
        ＊アクティブなUNIXドメインソケット(Active UNIX domain sockets)はローカルホスト内のプロセス間通信を表す

        | オプション | 説明 |
        | ---- | ---- |
        | -a, --all | すべてのソケットを表示 |
        | -c, --continuous | 状況を1秒ごとにリアルタイムで表示 |
        | -i, --interfaces | ネットワークインターフェースの状態を表示 |
        | -l, --listening | 接続待ち状態にあるソケットのみ表示 |
        | -n, --numeric | アドレスやポートを数値で表示 |
        | -p, --programs | PIDとプロセスを表示 |
        | -r, --route | カーネルのルーティングテーブルを表示 |
        | -t, --tcp | TCPを表示 |
        | -u, --udp | UDPを表示 |

    - ss
        - netstatとほぼ同じ機能

        | オプション | 説明 |
        | ---- | ---- |
        | -a, --all | すべてのソケットを表示 |
        | -n, --numeric | アドレスやポートを数値で表示 |
        | -p, --processes | PIDとプロセスも表示(管理者権限が必要) |
        | -r, --resolve | ホスト名を解決する |
        | -t, --tcp | TCPを表示 |
        | -u, --udp | UDPを表示 |
        | -4, --ipv4 | IPv4のみを表示 |
        | -6, --ipv6 | IPv6のみを表示 |

    - tracetoute
        - 指定されたホストまでパケットが伝わる経路を表示
        - 宛先までの経路上に障害があった場合はその位置を特定できる可能性がある
        - ネットワーク経路上にICMPメッセージに返答しないホストが存在する場合は適切な動作が期待できない

        | オプション | 説明 |
        | ---- | ---- |
        | -4 | IPv4を使う |
        | -6 | IPv6を使う |
        | -i, --interface インターフェース | ネットワークインターフェースを指定する |
        | -n | ホスト名をIPアドレスで表示 |

        - IPv6を使う場合は-6オプションを使う以外に`traceroute6`コマンドも使える
    - nc(netcat)
        - TCP/UDPを使ったネットワーク通信を行うシンプルなコマンド
        - ポートスキャンや通信状態の確認に使える
        - 25番ポートに接続: `$ nc localhost 25`
- NetworkManager
    - ネットワークを管理するサブシステム
    - `nmcli`コマンドを使ってネットワークの設定や接続の管理などを行う

    | オブジェクト | コマンド | 説明 |
    | ---- | ---- | ---- |
    | general | status | NerworkManagerの状態を表示 |
    | ^ | hostname | ホスト名を表示 |
    | ^ | hostname ホスト名 | 指定したホスト名に変更 |
    | networking | on/off | ネットワークを有効/無効にする |
    | radio | connectivity [check] | ネットワークの状態を表示(checkを指定すると再確認する) |
    | ^ | wifi | Wi-Fiの状態を表示 |
    | ^ | wifi no/off | Wi-Fi接続を有効/無効にする |
    | ^ | wwan | モバイルブロードバンドの状態を表示 |
    | ^ | wwan on/off | モバイルブロードバンド接続を有効/無効にする |
    | ^ | all on/off | すべての無線接続を有効/無効にする |
    | connection | show [--active] | 接続情報を表示(--active指定でアクティブな接続のみに) |
    | ^ | modify インターフェース名 パラメータ | 指定した接続を設定 |
    | ^ | up ID | 接続を有効にする |
    | ^ | down ID | 接続を無効にする |
    | device | status | デバイスの状態を表示 |
    | ^ | show インターフェース名 | 指定したデバイスを表示 |
    | ^ | modify インターフェース名 パラメータ | 指定したデバイスを設定 |
    | ^ | connect インターフェース名 | 指定したデバイスを接続する |
    | ^ | disconnect インターフェース名 | 指定したデバイスを切断する |
    | ^ | delete インターフェース名 | 指定したデバイスを削除する |
    | ^ | monitor インターフェース名 | 指定したデバイスをモニターする |
    | ^ | wifi list | Wi-Fiアクセスポイントを表示 |
    | ^ | wifi connect SSID | Wi-Fiアクセスポイントに接続する |
    | ^ | wifi hotspot | Wi-Fiホットスポットを作成する |
    | ^ | wifi rescan | Wi-Fiアクセスポイントを再検索する |